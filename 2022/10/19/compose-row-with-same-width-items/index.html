<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport">
    <link rel="alternate icon" type="image/png" href="/img/favicon.png">
    <title>oMMiao's Blog</title>
    
<link rel="stylesheet" href="/css/reset.css">

    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/markdown.css">

    
<link rel="stylesheet" href="/css/fonts.css">

<meta name="generator" content="Hexo 6.2.0"></head>
    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">oMMiao's Blog</a>
    <a class="go-home" href="/">
        <svg width="8" height="14" viewBox="0 0 8 14">
            <path d="M7 1L1 7l6 6" stroke="#000" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
    </a>
</div>
                
                <div class="post-main">

    
        <div class="post-main-title">
            Composeé‡Œå¦‚ä½•æå‰æµ‹é‡Viewçš„Sizeï¼Ÿ
        </div>
        <div class="post-meta">
            2022-10-19
        </div>
    

    <div class="post-md">
        <p>æœ€è¿‘é‡åˆ°ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„éœ€æ±‚ï¼Œä½†åœ¨å®ç°çš„æ—¶å€™å´é‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œå€¼å¾—è®°å½•ä¸€ä¸‹ã€‚</p>
<p>éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼Œåœ¨Compose Rowä¸­æœ‰ä¸¤ä¸ªæ–‡å­—Buttonï¼Œæ–‡å­—å†…å®¹ä¸åŒå› æ­¤å®½åº¦ä¹Ÿå¯èƒ½ä¸åŒï¼Œå¦‚ä¸‹ï¼š</p>
<hr>

    <div>
      <img src="default-width.png" alt="é»˜è®¤å®½åº¦æ•ˆæœå›¾" data-action="zoom" class="photozoom">
      
    </div>

<hr>
<p>æƒ³è¦å®ç°çš„æ•ˆæœæ˜¯ä¸¤ä¸ªButtonçš„å®½åº¦ä¸€è‡´ï¼Œå¦‚ä¸‹ï¼š</p>
<hr>

    <div>
      <img src="same-width.png" alt="ç›¸åŒå®½åº¦æ•ˆæœå›¾" data-action="zoom" class="photozoom">
      
    </div>

<hr>
<h3 id="Option-1ï¼šå›ºå®šå®½åº¦"><a href="#Option-1ï¼šå›ºå®šå®½åº¦" class="headerlink" title="Option 1ï¼šå›ºå®šå®½åº¦"></a>Option 1ï¼šå›ºå®šå®½åº¦</h3><p>çœ‹åˆ°è¿™é‡Œå¯èƒ½æœ‰äººä¼šè¯´äº†ï¼Œè¿™æœ‰ä»€ä¹ˆéš¾çš„ï¼Œç›´æ¥é€šè¿‡Modifierè®¾ç½®åŒæ ·çš„å®½åº¦ä¸å°±æå®šäº†å—ï¼Ÿ</p>
<pre><code class="kotlin">Button(modifier = Modifier.width(120.dp)){
    Text(text = "...")
}
</code></pre>
<hr>

    <div>
      <img src="fixed-width-0.png" alt="å›ºå®šå®½åº¦æ•ˆæœå›¾-æ­£å¸¸" data-action="zoom" class="photozoom">
      
    </div>

<hr>
<p>ç¡®å®åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¯ä»¥çš„ã€‚ä½†é—®é¢˜å‡ºåœ¨Buttonå†…éƒ¨çš„Textçš„å®½åº¦å¹¶ä¸æ˜¯å®Œå…¨å›ºå®šçš„ï¼Œå¦‚æœç”¨æˆ·åœ¨ç³»ç»Ÿè®¾ç½®äº†è°ƒæ•´äº†æ–‡å­—å¤§å°ï¼Œé‚£ä¹ˆç»™å®šçš„å®½åº¦æœ‰å¯èƒ½ä¸è¶³ä»¥å±•ç¤ºæ–‡å­—ï¼Œå¯¼è‡´æ–‡å­—è¢«çœç•¥æˆ–è€…æ¢è¡Œæ˜¾ç¤ºï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<hr>

    <div>
      <img src="fixed-width-1.png" alt="å›ºå®šå®½åº¦æ•ˆæœå›¾-å¼‚å¸¸" data-action="zoom" class="photozoom">
      
    </div>

<hr>
<h3 id="Option-2ï¼šæœ€å°å®½åº¦"><a href="#Option-2ï¼šæœ€å°å®½åº¦" class="headerlink" title="Option 2ï¼šæœ€å°å®½åº¦"></a>Option 2ï¼šæœ€å°å®½åº¦</h3><p>æ—¢ç„¶å›ºå®šå®½åº¦å¯èƒ½ä¼šå¯¼è‡´Textç©ºé—´ä¸è¶³ï¼Œé‚£ä¹ˆè®¾ç½®æœ€å°å®½åº¦å‘¢ï¼Ÿ<br>ç›´æ¥æ”¾ç­”æ¡ˆå§ï¼Œè®¾ç½®æœ€å°å®½åº¦ç¡®å®å¯ä»¥è§£å†³æ¢è¡Œçš„é—®é¢˜ï¼Œä½†æ˜¯å´åˆè¿èƒŒäº†æœ€åˆçš„éœ€æ±‚â€“ä¸¤ä¸ªButtonå®½åº¦ä¸€è‡´ï¼Œå› ä¸ºåœ¨å®é™…å®½åº¦è¶…è¿‡æœ€å°å®½åº¦æ—¶ï¼Œä¸¤ä¸ªButtonçš„å®½åº¦ä¹Ÿå°±ä¼šæ ¹æ®ä¸åŒæ–‡å­—å†…å®¹åŠ¨æ€æ‰©å±•äº†ï¼Œå¦‚ä¸‹ï¼š</p>
<hr>

    <div>
      <img src="min-width.png" alt="æœ€å°å®½åº¦æ•ˆæœå›¾-å¼‚å¸¸" data-action="zoom" class="photozoom">
      
    </div>

<hr>
<h3 id="Option-3ï¼šè®¾ç½®ç›¸åŒweight"><a href="#Option-3ï¼šè®¾ç½®ç›¸åŒweight" class="headerlink" title="Option 3ï¼šè®¾ç½®ç›¸åŒweight"></a>Option 3ï¼šè®¾ç½®ç›¸åŒweight</h3><p>Compose Rowæ”¯æŒç»™æ¯ä¸ªå­å…ƒç´ è®¾ç½®weightï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»™ä¸¤ä¸ªButtonè®¾ç½®åŒæ ·çš„weightèƒ½å¦å®ç°å®½åº¦ä¸€è‡´çš„éœ€æ±‚å‘¢ï¼Ÿ<br>åœ¨å®é™…è¿›è¡Œæµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä¹Ÿå¾ˆæœŸå¾…ï¼Œä½†æ˜¯ç»“æœå¹¶ä¸ç¾å¥½ï¼ŒButtonçš„å®½åº¦ç¡®å®ä¸€è‡´äº†ï¼Œä½†æ˜¯ä¼šæŠŠæ•´ä¸ªRowçš„å‰©ä½™ç©ºé—´å…¨éƒ¨å……æ»¡ï¼š</p>
<hr>

    <div>
      <img src="weight.png" alt="ç›¸åŒweight-å¼‚å¸¸" data-action="zoom" class="photozoom">
      
    </div>

<hr>
<p><strong>ä¸Šé¢çš„æ–¹æ¡ˆéƒ½æ˜¯Compose APIå¯ä»¥ç›´æ¥æ”¯æŒçš„ï¼Œä½†éƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚</strong></p>
<p>ä»”ç»†æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœè¦å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬æœ€å¥½èƒ½å¤Ÿæ˜ç¡®çŸ¥é“å®½åº¦æ¯”è¾ƒå¤§çš„Buttonçš„å®½åº¦åˆ°åº•æ˜¯å¤šå°‘ï¼Œæœ‰äº†è¿™ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬ç»™å¦å¤–ä¸€ä¸ªButtonè®¾ç½®åŒæ ·çš„å®½åº¦å³å¯ã€‚<br>æ‰€ä»¥é—®é¢˜å°±è½¬æ¢æˆäº†å¦‚ä½•è·å–åˆ°ä¸€ä¸ªå…·ä½“çš„Composeç»„ä»¶çš„å®½åº¦ã€‚</p>
<p>Modifieræœ‰ä¸ª<code>onPlaced</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è¿”å›å½“å‰ç»„ä»¶åœ¨è¢«æ¸²æŸ“æ—¶çš„Sizeï¼Œæ²¡é”™ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼<br>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="kotlin">var buttonWidth by remember {
    mutableStateOf(0)
}
val buttonWidthDp = with(LocalDensity.current) {
    buttonWidth.toDp()
}
Row(
    horizontalArrangement = Arrangement.spacedBy(16.dp)
) {
    Button(
        modifier = Modifier.width(buttonWidthDp),
        onClick = { }
    ) {
        Text(text = "Short")
    }
    Button(
        modifier = Modifier.onPlaced { buttonWidth = it.size.width },
        onClick = { }
    ) {
        Text(text = "Looooooong")
    }
}
</code></pre>
<p>ç®€å•è¯´æ˜ä¸€ä¸‹ï¼Œé¦–å…ˆæˆ‘ä»¬ä½¿ç”¨stateè®°å½•buttonWidthï¼Œä½†åœ¨onPlacedä¹‹å‰æˆ‘ä»¬å¹¶ä¸èƒ½ç¡®å®šè¿™ä¸ªæ•°å­—ï¼Œå› æ­¤buttonWidthçš„åˆå§‹å€¼ä¸€å®šæ˜¯ä¸å‡†ç¡®çš„ï¼Œåœ¨buttonWidthä»åˆå§‹å€¼å˜æˆå®é™…å€¼çš„æ—¶å€™ï¼Œæœ‰æ¦‚ç‡èƒ½çœ‹åˆ°å·¦ä¾§buttonä¼šæœ‰é—ªåŠ¨çš„é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆèƒ½åœ¨Composeç»„ä»¶æ¸²æŸ“ä¹‹å‰æ‹¿åˆ°Sizeå‘¢ï¼Ÿ</p>
<p>Googleç»™å‡ºäº†ç­”æ¡ˆï¼šSubcomposeLayout()ï¼Œä»¥ä¸‹æ˜¯ç›´æ¥å¤åˆ¶çš„ä»£ç ï¼š</p>
<pre><code class="kotlin">@Composable
fun ViewWidthMeasureLayout(
    modifier: Modifier,
    viewToMeasure: @Composable () -&gt; Unit,
    content: @Composable (width: Dp) -&gt; Unit
) {
    SubcomposeLayout(modifier) { constraints -&gt;
        val width =
            subcompose("viewToMeasure", viewToMeasure)[0]
                .measure(Constraints()).width.toDp()
        val contentPlaceable = subcompose("content") {
            content(width)
        }[0].measure(constraints)
        layout(contentPlaceable.width, contentPlaceable.height) {
            contentPlaceable.place(0, 0)
        }
    }
}
</code></pre>
<p>SubcomposeLayoutå…è®¸æ‰§è¡Œä¸€ä¸ªComposableæ–¹æ³•ï¼Œè·å–æµ‹é‡ä¿¡æ¯ï¼Œä½†å¯ä»¥é€‰æ‹©ä¸å»æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ï¼Œå…¶ä¸­viewToMeasureä½œä¸ºç”¨äºæµ‹é‡çš„Composeç»„ä»¶ï¼Œè€Œåœ¨çœŸæ­£çš„layoutç¯èŠ‚ï¼Œå´å¹¶ä¸å°†viewToMeasureè¿›è¡Œplaceæ“ä½œï¼Œplaceå³æ˜¯å°†ç»„ä»¶æ”¾ç½®åœ¨layoutçš„æŸä¸ªä½ç½®ï¼Œä¸è¿›è¡Œplaceå°±ä¸ä¼šæ¸²æŸ“è¿™ä¸ªç»„ä»¶ã€‚</p>
<p>å†æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ï¼š</p>
<pre><code class="kotlin">ViewWidthMeasureLayout(
    modifier = Modifier.align(Alignment.Center),
    viewToMeasure = {
        Button(onClick = { }) {
            Text(text = "Loooooong")
        }
    }
) { width -&gt;
    Row(horizontalArrangement = Arrangement.spacedBy(16.dp)){
        Button(modifier = Modifier.width(width), onClick = { }) {
            Text(text = "Short")
        }
        Button(onClick = { }) {
            Text(text = "Loooooong")
        }
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯æœ‰äº›éº»çƒ¦çš„ï¼š</p>
<ol>
<li>ç”¨äºæµ‹é‡çš„ButtonåŒæ—¶ä¹Ÿæ˜¯ç”¨äºæ˜¾ç¤ºçš„ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸¤æ¬¡ã€‚</li>
<li>å¦‚æœå¦å¤–ä¸€ä¸ªButtonæ–‡å­—å˜æˆè¾ƒé•¿çš„é‚£ä¸ªï¼Œæˆ‘ä»¬éœ€è¦ä¼ é€’å¦ä¸€ä¸ªButtonä½œä¸ºæµ‹é‡Viewï¼ŒåæœŸç»´æŠ¤çš„æˆæœ¬å¾ˆå¤§ã€‚</li>
</ol>
<p>æ—¢ç„¶çŸ¥é“äº†åŸç†ï¼Œé‚£å°±æ¥å®šåˆ¶ä¸€ä¸ªå¯ä»¥è·å–æœ€å¤§å­å…ƒç´ å®½åº¦çš„Rowï¼Œè¿™æ ·å°±å¯ä»¥ä¸€åŠ³æ°¸é€¸äº†ã€‚</p>
<p>å®ç°ä»£ç ï¼š</p>
<pre><code class="kotlin">@Composable
fun SameItemWidthRow(
    modifier: Modifier,
    horizontalArrangement: Arrangement.Horizontal,
    content: @Composable (maxItemWidth: Dp) -&gt; Unit
) {
    SubcomposeLayout(modifier) { constraints -&gt;
        val maxItemWidth =
            subcompose("viewToMeasure") {
                content(Dp.Unspecified)
            }.maxOfOrNull {
                it.measure(Constraints()).width.toDp()
            } ?: Dp.Unspecified

        val contentPlaceable = subcompose("content") {
            Row(
                horizontalArrangement = horizontalArrangement
            ) {
                content(maxItemWidth)
            }
        }[0].measure(constraints)
        layout(contentPlaceable.width, contentPlaceable.height) {
            contentPlaceable.place(0, 0)
        }
    }
}
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬éå†æµ‹é‡æ‰€æœ‰çš„å­å…ƒç´ ï¼Œæ‰¾åˆ°æœ€å¤§çš„å®½åº¦ï¼Œç„¶åå°†å…¶ä¼ é€’å‡ºå»ä½œä¸ºæ‰€æœ‰å­å…ƒç´ çš„å®½åº¦ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ é€’ä¸€æ¬¡å­å…ƒç´ ï¼Œä»–ä»¬å…ˆè¢«ç”¨äºæµ‹é‡ï¼Œç„¶åå†è¢«ç”¨äºç»˜åˆ¶ï¼Œç”¨äºæµ‹é‡æ—¶æˆ‘ä»¬å‡å®šå­å…ƒç´ çš„å®½åº¦æ˜¯Dp.Unspecifiedï¼Œè¿™æ ·å¯ä»¥è®©å­å…ƒç´ ä¸å—é™åˆ¶åœ°æµ‹é‡çœŸå®å®½åº¦ã€‚</p>
<p>ä½¿ç”¨ä½“éªŒï¼š</p>
<pre><code class="kotlin"> SameItemWidthRow(
    horizontalArrangement = Arrangement.spacedBy(16.dp)
) { maxItemWidth -&gt;
    Button(modifier = Modifier.width(maxItemWidth), onClick = { }) {
        Text(text = "Short")
    }
    Button(modifier = Modifier.width(maxItemWidth), onClick = { }) {
        Text(text = "Loooooong")
    }
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æ—¢å®ç°äº†éœ€æ±‚ï¼Œåˆè®©ä»£ç ç®€å•å¾—åƒåŸæ¥çš„Rowä¸€æ ·äº†ã€‚</p>
<h3 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h3><p>åœ¨å®ç°è¿™ä¸ªéœ€æ±‚çš„æ—¶å€™ï¼Œæœ‰ä¸ªå‰ææ˜¯æ‰€æœ‰å­å…ƒç´ çš„å®½åº¦ä¹‹å’Œä¸èƒ½è¶…è¿‡Rowçš„å®½åº¦ï¼Œå¦‚æœä¸èƒ½æ»¡è¶³è¿™ä¸€ç‚¹çš„è¯ï¼Œä¹Ÿå°±ä¸èƒ½è®©æ¯ä¸ªå­å…ƒç´ ç­‰å®½äº†ï¼Œå¦‚æœå¼ºåˆ¶ç­‰å®½ï¼Œä½¿ç”¨ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆä¼šå¯¼è‡´æœ€åçš„å…ƒç´ æ¸²æŸ“æ—¶å®é™…å®½åº¦ä¸è¶³ï¼Œè¿˜æ˜¯æ— æ³•æ»¡è¶³å®½åº¦ä¸€è‡´çš„éœ€æ±‚ã€‚ä¸è¿‡å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œä¹Ÿæ²¡æœ‰å…¶ä»–çš„è§£å†³æ–¹æ¡ˆäº†ï¼Œåªèƒ½ä¿®æ”¹è®¾è®¡ğŸ˜„ã€‚</p>

    </div>

</div>
                <div class="footer">
    <span>Copyright Â© 2022 oMMiao's Blog</span>
    <span>Powered By Hexo &amp; ZheLi</span>
</div>


<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>


<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    
<script type="text/javascript">/**
 * Pure JavaScript implementation of zoom.js.
 *
 * Original preamble:
 * zoom.js - It's the best way to zoom an image
 * @version v0.0.2
 * @link https://github.com/fat/zoom.js
 * @license MIT
 *
 * This is a fork of the original zoom.js implementation by @fat.
 * Copyrights for the original project are held by @fat. All other copyright
 * for changes in the fork are held by Nishanth Shanmugham.
 *
 * Copyright (c) 2013 @fat
 * The MIT License. Copyright Â© 2016 Nishanth Shanmugham.
 */
(function() {
    "use strict";
    var _createClass = function() {
        function defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        return function(Constructor, protoProps, staticProps) {
            if (protoProps) defineProperties(Constructor.prototype, protoProps);
            if (staticProps) defineProperties(Constructor, staticProps);
            return Constructor;
        };
    }();
    function _classCallCheck(instance, Constructor) {
        if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
        }
    }
    (function(modules) {
        var installedModules = {};
        function __webpack_require__(moduleId) {
            if (installedModules[moduleId]) return installedModules[moduleId].exports;
            var module = installedModules[moduleId] = {
                i: moduleId,
                l: false,
                exports: {}
            };
            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
            module.l = true;
            return module.exports;
        }
        __webpack_require__.m = modules;
        __webpack_require__.c = installedModules;
        __webpack_require__.i = function(value) {
            return value;
        };
        __webpack_require__.d = function(exports, name, getter) {
            if (!__webpack_require__.o(exports, name)) {
                Object.defineProperty(exports, name, {
                    configurable: false,
                    enumerable: true,
                    get: getter
                });
            }
        };
        __webpack_require__.n = function(module) {
            var getter = module && module.__esModule ? function getDefault() {
                return module["default"];
            } : function getModuleExports() {
                return module;
            };
            __webpack_require__.d(getter, "a", getter);
            return getter;
        };
        __webpack_require__.o = function(object, property) {
            return Object.prototype.hasOwnProperty.call(object, property);
        };
        __webpack_require__.p = "";
        return __webpack_require__(__webpack_require__.s = 3);
    })([ function(module, exports, __webpack_require__) {
        "use strict";
        __webpack_require__.d(exports, "a", function() {
            return windowWidth;
        });
        __webpack_require__.d(exports, "b", function() {
            return windowHeight;
        });
        __webpack_require__.d(exports, "c", function() {
            return elemOffset;
        });
        __webpack_require__.d(exports, "d", function() {
            return once;
        });
        var windowWidth = function windowWidth() {
            return document.documentElement.clientWidth;
        };
        var windowHeight = function windowHeight() {
            return document.documentElement.clientHeight;
        };
        var elemOffset = function elemOffset(elem) {
            var rect = elem.getBoundingClientRect();
            var docElem = document.documentElement;
            var win = window;
            return {
                top: rect.top + win.pageYOffset - docElem.clientTop,
                left: rect.left + win.pageXOffset - docElem.clientLeft
            };
        };
        var once = function once(elem, type, handler) {
            var fn = function fn(e) {
                e.target.removeEventListener(type, fn);
                handler();
            };
            elem.addEventListener(type, fn);
        };
    }, function(module, exports, __webpack_require__) {
        "use strict";
        var __WEBPACK_IMPORTED_MODULE_0__zoom_image_js__ = __webpack_require__(2);
        var __WEBPACK_IMPORTED_MODULE_1__utils_js__ = __webpack_require__(0);
        __webpack_require__.d(exports, "a", function() {
            return zoom;
        });
        var current = null;
        var offset = 80;
        var initialScrollPos = -1;
        var initialTouchPos = -1;
        var setup = function setup(elem) {
            elem.addEventListener("click", prepareZoom);
        };
        var prepareZoom = function prepareZoom(e) {
            e.preventDefault();
            e.stopPropagation();
            if (document.body.classList.contains("zoom-overlay-open")) {
                return;
            }
            if (e.metaKey || e.ctrlKey) {
                window.open(e.target.getAttribute("data-original") || e.target.src, "_blank");
                return;
            }
            if (e.target.width >= __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_js__["a"])() - offset) {
                return;
            }
            closeCurrent(true);
            current = new __WEBPACK_IMPORTED_MODULE_0__zoom_image_js__["a"](e.target, offset);
            current.zoom();
            addCloseListeners();
        };
        var closeCurrent = function closeCurrent(force) {
            if (current == null) {
                return;
            }
            if (force) {
                current.dispose();
            } else {
                current.close();
            }
            removeCloseListeners();
            current = null;
        };
        var addCloseListeners = function addCloseListeners() {
            document.addEventListener("scroll", handleScroll);
            document.addEventListener("keyup", handleKeyup);
            document.addEventListener("touchstart", handleTouchStart);
            document.addEventListener("click", handleClick, true);
        };
        var removeCloseListeners = function removeCloseListeners() {
            document.removeEventListener("scroll", handleScroll);
            document.removeEventListener("keyup", handleKeyup);
            document.removeEventListener("touchstart", handleTouchStart);
            document.removeEventListener("click", handleClick, true);
        };
        var handleScroll = function handleScroll() {
            if (initialScrollPos == -1) {
                initialScrollPos = window.pageYOffset;
            }
            var deltaY = Math.abs(initialScrollPos - window.pageYOffset);
            if (deltaY >= 40) {
                closeCurrent();
            }
        };
        var handleKeyup = function handleKeyup(e) {
            if (e.keyCode == 27) {
                closeCurrent();
            }
        };
        var handleTouchStart = function handleTouchStart(e) {
            var t = e.touches[0];
            if (t == null) {
                return;
            }
            initialTouchPos = t.pageY;
            e.target.addEventListener("touchmove", handleTouchMove);
        };
        var handleTouchMove = function handleTouchMove(e) {
            var t = e.touches[0];
            if (t == null) {
                return;
            }
            if (Math.abs(t.pageY - initialTouchPos) > 10) {
                closeCurrent();
                e.target.removeEventListener("touchmove", handleTouchMove);
            }
        };
        var handleClick = function handleClick(e) {
            e.preventDefault();
            e.stopPropagation();
            closeCurrent();
        };
        var zoom = Object.create(null);
        zoom.setup = setup;
    }, function(module, exports, __webpack_require__) {
        "use strict";
        var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
        var Size = function Size(w, h) {
            _classCallCheck(this, Size);
            this.w = w;
            this.h = h;
        };
        var ZoomImage = function() {
            function ZoomImage(img, offset) {
                _classCallCheck(this, ZoomImage);
                this.img = img;
                this.preservedTransform = img.style.transform;
                this.wrap = null;
                this.overlay = null;
                this.offset = offset;
            }
            _createClass(ZoomImage, [ {
                key: "forceRepaint",
                value: function forceRepaint() {
                    var _ = this.img.offsetWidth;
                    return;
                }
            }, {
                key: "zoom",
                value: function zoom() {
                    var size = new Size(this.img.naturalWidth, this.img.naturalHeight);
                    this.wrap = document.createElement("div");
                    this.wrap.classList.add("zoom-img-wrap");
                    this.img.parentNode.insertBefore(this.wrap, this.img);
                    this.wrap.appendChild(this.img);
                    this.img.classList.add("zoom-img");
                    this.img.setAttribute("data-action", "zoom-out");
                    this.overlay = document.createElement("div");
                    this.overlay.classList.add("zoom-overlay");
                    this.caption = document.createElement("span");
                    this.caption.innerHTML = this.img.getAttribute("alt");
                    this.caption.classList.add("zoom-caption");
                    this.overlay.appendChild(this.caption);
                    document.body.appendChild(this.overlay);
                    this.forceRepaint();
                    var scale = this.calculateScale(size);
                    this.forceRepaint();
                    this.animate(scale);
                    document.body.classList.add("zoom-overlay-open");
                }
            }, {
                key: "calculateScale",
                value: function calculateScale(size) {
                    var maxScaleFactor = size.w / this.img.width;
                    var viewportWidth = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["a"])() - this.offset;
                    var viewportHeight = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["b"])() - this.offset;
                    var imageAspectRatio = size.w / size.h;
                    var viewportAspectRatio = viewportWidth / viewportHeight;
                    if (size.w < viewportWidth && size.h < viewportHeight) {
                        return maxScaleFactor;
                    } else if (imageAspectRatio < viewportAspectRatio) {
                        return viewportHeight / size.h * maxScaleFactor;
                    } else {
                        return viewportWidth / size.w * maxScaleFactor;
                    }
                }
            }, {
                key: "animate",
                value: function animate(scale) {
                    var imageOffset = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["c"])(this.img);
                    var scrollTop = window.pageYOffset;
                    var viewportX = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["a"])() / 2;
                    var viewportY = scrollTop + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["b"])() / 2;
                    var imageCenterX = imageOffset.left + this.img.width / 2;
                    var imageCenterY = imageOffset.top + this.img.height / 2;
                    var tx = viewportX - imageCenterX;
                    var ty = viewportY - imageCenterY;
                    var tz = 0;
                    var imgTr = "scale(" + scale + ")";
                    var wrapTr = "translate3d(" + tx + "px, " + ty + "px, " + tz + "px)";
                    this.img.style.transform = imgTr;
                    this.wrap.style.transform = wrapTr;
                }
            }, {
                key: "dispose",
                value: function dispose() {
                    if (this.wrap == null || this.wrap.parentNode == null) {
                        return;
                    }
                    this.img.classList.remove("zoom-img");
                    this.img.setAttribute("data-action", "zoom");
                    this.wrap.parentNode.insertBefore(this.img, this.wrap);
                    this.wrap.parentNode.removeChild(this.wrap);
                    document.body.removeChild(this.overlay);
                    document.body.classList.remove("zoom-overlay-transitioning");
                }
            }, {
                key: "close",
                value: function close() {
                    var _this = this;
                    document.body.classList.add("zoom-overlay-transitioning");
                    this.img.style.transform = this.preservedTransform;
                    if (this.img.style.length === 0) {
                        this.img.removeAttribute("style");
                    }
                    this.wrap.style.transform = "none";
                    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["d"])(this.img, "transitionend", function() {
                        _this.dispose();
                        document.body.classList.remove("zoom-overlay-open");
                    });
                }
            } ]);
            return ZoomImage;
        }();
        exports["a"] = ZoomImage;
    }, function(module, exports, __webpack_require__) {
        "use strict";
        Object.defineProperty(exports, "__esModule", {
            value: true
        });
        var __WEBPACK_IMPORTED_MODULE_0__src_zoom_js__ = __webpack_require__(1);
        document.addEventListener("DOMContentLoaded", function() {
            var elems = document.querySelectorAll("img[data-action='zoom']");
            for (var i = 0; i < elems.length; i++) {
                __WEBPACK_IMPORTED_MODULE_0__src_zoom_js__["a"].setup(elems[i]);
            }
        });
    } ]);
})();
</script><style>img[data-action="zoom"] {
  cursor: pointer;
  cursor: -webkit-zoom-in;
  cursor: -moz-zoom-in;
}
.zoom-img,
.zoom-img-wrap {
  position: relative;
  z-index: 666;
  -webkit-transition: all 300ms;
       -o-transition: all 300ms;
          transition: all 300ms;
}
img.zoom-img {
  cursor: pointer;
  cursor: -webkit-zoom-out;
  cursor: -moz-zoom-out;
}
.zoom-overlay {
  z-index: 420;
  background: #000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  filter: "alpha(opacity=0)";
  opacity: 0;
  text-align: center;
  -webkit-transition:      opacity 300ms ease-in-out;
       -o-transition:      opacity 300ms ease-in-out;
          transition:      opacity 300ms ease-in-out;
}
.zoom-overlay-open .zoom-overlay {
  filter: "alpha(opacity=100)";
  opacity: 1;
}
.zoom-overlay-open,
.zoom-overlay-transitioning {
  cursor: default;
}
.zoom-overlay-transitioning .zoom-overlay {
  opacity: 0;
}
.zoom-caption {
    z-index:667;
    bottom:10px;
    position:fixed;
    left:10px;
    right:10px;
    color:#fff;
}
</style></body></html>